#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

struct date
{
  char day[3];
  char month[3];
  char year[5];
  char name[100];
};

char* splitString(char str[], int start, int len)
{
  int i,j=0;
  char *data = malloc(sizeof(char) * (len+1));
  char *ptr = str;
 
  for(i=0; i<len; i++)
    {
      data[i] = str[i+start];
    }
  data[i] = '\n';
  return data;
}


// char* substring(char s[], char sub[], int p, int l) {
//    int c = 0;
   
//    while (c < l) {
//       sub[c] = s[p+c-1];
//       c++;
//    }
//    sub[c] = '\0';
//    return sub;
// }

int main(void) {
  FILE *file = fopen("student.txt", "r");

  if(file == NULL)
  {
    perror("Unable to open file");
    exit(1);
  }

  char line[15];
  
  char ch = fgetc(file);
  int n = ch - '0';

   // Collecting names...........
  char names[n+1][100];
  int i=0;
  while(fscanf(file, "%s %*s", line) == 1)
    {
      strcpy(names[i], line);
      i = i+1;
    }
  int k = atoi(names[0]);
  for(i=0;i<n+1;i++)
  {
      strcpy(names[i], names[i+1]);
    }
  for(i=0;i<n;i++)
  {
      printf("%s ", names[i]);
  }

  // Storing names in structure
  struct date d[n];
    for(i=0;i<n;i++)
    {
      strcpy(d[i].name, names[i]);
    }
  
   // Collecting DOBs......
  char dob[n][100];
  i=0;
  printf("\n");
  FILE *file2 = fopen("student.txt", "r");
   if(file2 == NULL)
  {
    perror("Unable to open file");
    exit(1);
  }

  while(fscanf(file2, "%s %*s", line) == 1)
    {
      strcpy(dob[i], line);
      i = i+1;
    }

  printf("%d %d\n", n,k);
  for(i=0;i<n;i++)
    {
      strcpy(dob[i], dob[i+1]);
    }

  for(i=0;i<n;i++)
    printf("%s ", dob[i]);

  // Storing dates in structure
  for(i=0;i<n;i++)
    {
      strcpy(d[i].day, splitString(dob[i], 0, 2));
      strcpy(d[i].month, splitString(dob[i], 2, 2));
      strcpy(d[i].year, splitString(dob[i], 4, 4));
      d[i].day[2] = '\0';
      d[i].month[2] = '\0';
      d[i].year[4] = '\0';
    }

  printf("\n");
  printf("Dates: ");
  printf("\n");

  for(i=0;i<n;i++)
    {
      printf("Day: %s ", d[i].day);
       printf("Month: %s ", d[i].month);
       printf("Year: %s \n", d[i].year);
    }

  fclose(file);
  fclose(file2);
  return 0;
}
